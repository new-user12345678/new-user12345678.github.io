<!DOCTYPE html>
<html>
<head>
  <!-- Подключите Discord SDK через разрешенный URL -->
  <script src="https://sdk.discordapp.link/discord-sdk-1.2.0.js"></script>
</head>
<body>
  <div id="root">Загрузка...</div>

  <script nonce="MjMyLDEzNCwxMjcsMjMyLDg1LDEzNiw5MCwxMzc=">
    (async () => {
      try {
        // DiscordSDK теперь доступен через глобальную переменную
        const discordSdk = new DiscordSDK("1370033603878322238");
        await discordSdk.ready();

        // Аутентификация
        const { code } = await discordSdk.commands.authenticate({
          type: "code"
        });

        // Подписка на события
        discordSdk.subscribe('VOICE_CHANNEL_SELECT', (data) => {
          const root = document.getElementById('root');
          root.textContent = `Пользователь в канале: ${data.channelId}`;
        });

      } catch (error) {
        const root = document.getElementById('root');
        root.textContent = `Ошибка: ${error.message}`;
      }
    })();
  </script>
</body>
</html>
