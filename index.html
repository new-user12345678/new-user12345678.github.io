<!DOCTYPE html>
<html>
<head>
  <!-- Подключите SDK в <head> -->
  <script src="https://unpkg.com/@discord/embedded-app-sdk@latest"></script>
</head>
<body>
  <!-- Контейнер для вывода информации -->
  <div id="root"></div>

  <script>
  (async () => {
    try {
      const discordSdk = new DiscordSDK("ВАШ_CLIENT_ID");
      await discordSdk.ready();

      const { user } = await discordSdk.commands.authenticate({ 
        type: "code",
        code: "AUTH_TOKEN" 
      });

      discordSdk.subscribe('VOICE_CHANNEL_SELECT', (data) => {
        console.log("Пользователь в канале:", data.channelId);
        
        // Используйте безопасное обновление DOM
        const root = document.getElementById('root');
        if (root) {
          root.textContent = `Пользователь в канале: ${data.channelId}`;
        }
      });

    } catch (error) {
      console.error("Ошибка:", error);
      const root = document.getElementById('root');
      if (root) {
        root.textContent = `Ошибка: ${error.message}`;
      }
    }
  })();
  </script>
</body>
</html>
